# Disable Redis auto-configuration for tests
spring.cache.type=NONE
spring.autoconfigure.exclude=org.springframework.boot.autoconfigure.data.redis.RedisAutoConfiguration,org.springframework.boot.autoconfigure.data.redis.RedisRepositoriesAutoConfiguration,org.springframework.boot.autoconfigure.kafka.KafkaAutoConfiguration,org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration,org.springframework.boot.actuate.autoconfigure.security.servlet.ManagementWebSecurityAutoConfiguration,org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration

# Allow bean definition overriding to prevent conflicts when both servlet and reactive dependencies are present
spring.main.allow-bean-definition-overriding=true

# Liquibase (test)
spring.liquibase.change-log=classpath:db/changelog/db.changelog-master.yaml
spring.liquibase.enabled=true
spring.liquibase.default-schema=public

# Database Connection Details
spring.r2dbc.url=r2dbc:postgresql://localhost:5432/financial_risk_management
spring.r2dbc.username=admin
spring.r2dbc.password=password

# Liquibase Configuration
spring.liquibase.url=jdbc:postgresql://localhost:5432/financial_risk_management
spring.liquibase.user=admin
spring.liquibase.password=password
spring.liquibase.change-log=classpath:db/changelog/db.changelog-master.yaml

logging.level.io.r2dbc.postgresql=ERROR
logging.level.io.r2dbc.pool=ERROR
logging.level.org.springframework.security=ERROR
spring.main.banner-mode=off

# Prometheus Metrics Configuration (needed for PrometheusMetricsIntegrationTest)
management.endpoints.web.exposure.include=prometheus,health,metrics
management.endpoint.prometheus.enabled=true
management.metrics.export.prometheus.enabled=true
management.health.redis.enabled=false

# Additional logging configuration
logging.level.com.nickfallico.financialriskmanagement=INFO
logging.level.org.springframework=WARN
logging.level.org.springframework.kafka=ERROR
logging.level.org.apache.kafka=ERROR

# Kafka Configuration (disabled for tests)
spring.kafka.enabled=false